{"version":3,"sources":["APIClient.js","App.js","index.js"],"names":["Log","console","log","Fetch","url","init","headers","fetch","APIRequest","method","id","params","a","body","JSON","stringify","http_response","ok","Error","json","json_response","result","status","APIClient","NewCharacter","desc","ChangeMood","new_mood","TriggerEvent","event_desc","attitude","GetReplyFromCharacter","user_message","user_name","CreateUserSession","App","props","changeCharacterHandler","event","preventDefault","target","setTrevor","setLanda","setCourtney","setBlankCharacter","error","changeMoodHandler","x","changeMood","presetEventHandler","textInputHandler","v","value","setState","changeEventReaction","e","EventReaction","bind","triggerCustomEvent","triggerEventHandler","sendHandler","state","getInitialState","createUserSession","api_lock","then","CharDesc","CharName","CharStartLine","PlayerName","PlayerDesc","ChatInput","EventDescInput","ChatHistory","name","line","this","ChatChrono","setChar","prevState","concat","text","type","triggerEvent","split","map","i","key","reply","entry","from","parseReply","character_reply","clearChatInput","elem","renderChatEntry","join","displayWithNewlines","chatHistory","colSpan","onClick","className","renderChatHistory","onChange","placeholder","rowSpan","React","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e6914048.chunk.js","sourcesContent":["const baseUrl = \"https://r4xp4nhmja.execute-api.eu-west-2.amazonaws.com/default\";\n\nconst DoLogs = true\n\nfunction Log(...args) {\n    if (DoLogs) {\n        console.log(...args)\n    }\n}\n\nconst Fetch = function(url, init) {\n    let headers\n\n    if (init) {\n        if (init.headers) {\n            headers = init.headers\n        } else {\n            headers = {}\n        }\n    } else {\n        headers = {}\n    }\n\n    Log(init)\n    Log(headers)\n\n    return fetch(`${baseUrl}${url}`, { ...init, headers })\n}\n\nconst APIRequest = async function(method, id, params) {\n    Log(id)\n    Log(method)\n    Log(params)\n\n    const http_response = await Fetch(\"\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"Application/json\"\n        },\n        body: JSON.stringify({ method, id, params })\n    })\n\n    if (!http_response.ok) {\n        throw Error(\"APIRequest: Couldn't get '\" + method + \"' response\")\n    }\n\n    const json_response = await http_response.json()\n\n    Log(\"Response:\", json_response)\n\n    const { result, status } = json_response\n\n    if (status !== \"ok\") {\n        throw Error(\"APIRequest: '\" + method + \"' request failed\")\n    }\n\n    return result\n}\n\nconst APIClient = (function() {\n    return {\n        NewCharacter: function(id, desc) {\n            let params = {desc: desc}\n            return APIRequest(\"new_character\", id, params)\n        },\n\n        ChangeMood: function(id, new_mood) {\n            let params = {new_mood: new_mood}\n            return APIRequest(\"change_mood\", id, params)\n        },\n\n        TriggerEvent: function(id, event_desc, attitude) {\n            let params = {event_desc: event_desc, attitude: attitude}\n            return APIRequest(\"trigger_event\", id, params)\n        },\n\n        GetReplyFromCharacter: function(id, user_message, user_name) {\n            let params = {user_message: user_message, user_name: user_name}\n            return APIRequest(\"request_reply\", id, params)\n        },\n\n        CreateUserSession: function() {\n            let params = {}\n            return APIRequest(\"create_user_session\", params)\n        },\n\n        \n    }\n})()\n\nexport default APIClient","import React from 'react';\nimport './App.css';\nimport APIClient from './APIClient.js'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.changeCharacterHandler = this.changeCharacterHandler.bind(this)\n    this.changeMoodHandler = this.changeMoodHandler.bind(this)\n    this.presetEventHandler = this.presetEventHandler.bind(this)\n    this.textInputHandler = this.textInputHandler.bind(this)\n    this.triggerCustomEvent = this.triggerCustomEvent.bind(this)\n    this.triggerEventHandler = this.triggerEventHandler.bind(this)\n    this.sendHandler = this.sendHandler.bind(this)\n\n    this.setTrevor = this.setTrevor.bind(this)\n    this.setCourtney = this.setCourtney.bind(this)\n    this.setLanda = this.setLanda.bind(this)\n\n    this.state = this.getInitialState()\n\n    this.createUserSession()\n\n    this.api_lock = false\n  }\n\n  createUserSession() {\n    APIClient.CreateUserSession().then((id) => {\n      console.log(\"Got user session: \", id)\n      this.setState({ id: id })\n    })\n  }\n\n  getInitialState() {\n    return {\n      id: 1,\n      CharDesc: \"\",\n      CharName: \"\",\n      CharStartLine: \"\",\n      PlayerName: \"You\",\n      PlayerDesc: \"\",\n      ChatInput: \"\",\n      EventDescInput: \"Describe event here\",\n      EventReaction: \"none\",\n      ChatHistory: []\n    }\n  }\n\n  setChar(name, desc, line) {\n    this.setState({\n      CharDesc: desc,\n      CharName: name,\n      CharStartLine: line,\n      ChatChrono: desc + \"\\n\" + name + \": \\\"\" +  line + \"\\\"\"\n    })\n  }\n\n  setCourtney(event) {\n    let desc = \"Courtney is a hot bitchy girl. She has huge tits and round ass. She likes money and sex. Here is her direct messages with You\"\n    let name = \"Courtney\"\n    let line = \"Hi! Nice to see you, sweetie.\"\n\n    this.setChar(name, desc, line)\n  }\n\n  setLanda(event) {\n    let desc = \"Hans Landa is a Colonel in the SS tasked with locating Jews in hiding in Occupied France. Heâ€™s fluent in multiple languages, but beneath the educated, polite and even charming veneer is a cruel and sadistic man. While he takes great pride in his work, he acts entirely out of self-interest, as the story demonstrates. This time he is interrogating Marcel who is possibly hiding jews inside his house.\"\n    let name = \"Landa\"\n    let line = \"Hello, mr. Mercel\"\n\n    this.setChar(name, desc, line)\n  }\n\n  setTrevor(event) {\n    let desc = \"Trevor has been described as a difficult person to deal with: extreme, impetuous, vengeful, psychopathic, unhinged, unpredictable, untamed, infamous, homicidal, and prone to violent outbursts and destructive rampages. He does everything in a sociopathic and relentless manner.\"\n    let line = \"This piece of shit that was the cause of my misery, a completely worthless individual\"\n    let name = \"Trevor\"\n\n    this.setChar(name, desc, line)\n  }\n\n  setBlankCharacter(event) {\n    this.setState(this.getInitialState())\n  }\n\n  masterHandler() {\n    // ... todo\n  }\n\n  changeCharacterHandler = event => {\n    event.preventDefault()\n    var x = event.target.id\n    switch (x) {\n      case 'TrevorButton':\n        this.setTrevor()\n        break\n      case 'LandaButton':\n        this.setLanda()\n        break\n      case 'CourtneyButton':\n        this.setCourtney()\n        break\n      case 'CustomButton':\n        this.setBlankCharacter()\n        break\n      default: \n        console.error(\"Error in changeCharacterHandler\")\n    }\n  }\n\n  changeMood(new_mood) {\n    this.setState((prevState) => {\n      const new_history = prevState.ChatHistory.concat([{\n        text: prevState.CharName + \"'s mood changed to \" + new_mood,\n        type: \"notification\"\n      }])\n\n      return { ChatHistory: new_history }\n    })\n  }\n\n  changeMoodHandler = event => {\n    event.preventDefault()\n    var x = event.target.id\n    console.log(x);\n    switch (x) {\n      case 'NeutralMoodButton':\n        this.changeMood(\"neutral\")\n        break\n      case 'JoyMoodButton':\n        this.changeMood(\"joy\")\n        break\n      case 'EnvyMoodButton':\n        this.changeMood(\"envy\")\n        break\n      case 'FearMoodButton':\n        this.changeMood(\"fear\")\n        break\n      default: \n        console.error(\"Error in changeMoodHandler\")\n    }\n  }\n\n  presetEventHandler = event => {\n    event.preventDefault()\n    var x = event.target.id\n    switch (x) {\n      case 'FlowersEvent':\n      case 'CarCrashEvent':\n      case 'DisrespectEvent':\n        console.log(x);\n        break\n      default: \n        console.error(\"Error in presetEventHandler\")\n    }\n  }\n\n  textInputHandler = event => {\n    event.preventDefault()\n    var x = event.target.id\n    var v = event.target.value\n    switch (x) {\n      case 'ChatInput':\n      case 'CharName':\n      case 'CharStartLine':\n      case 'CharDesc':\n      case 'PlayerName':\n      case 'PlayerDesc':\n      case 'EventDescInput':\n        console.log(x, v)\n        break\n      default:\n        console.error(\"Error in textInputHandler\")\n    }\n\n    this.setState({[x]: v})\n  }\n\n  changeEventReaction = e => {\n    e.preventDefault()\n    var v = e.target.value\n    console.log(v)\n    this.setState({EventReaction: v})\n  }\n\n  triggerCustomEvent(event) {\n    event.preventDefault()\n    console.log(\"custom event\")\n\n    this.triggerEvent(this.state.EventDescInput, this.state.EventReaction)\n\n    this.setState({\n      EventDescInput: \"Describe event here\",\n      EventReaction: \"none\",\n    })\n  }\n\n  displayWithNewlines(text) {\n    return text.split(\"\\n\").map((i,key) => {\n      return <div key={key}>{i}</div>;\n    })\n  }\n\n  clearChatInput(reply) {\n    this.setState((state, props) => ({\n      ChatChrono: reply,\n      ChatInput: \"\"\n    }));\n  }\n\n  renderChatEntry(entry) {\n    var result = \"\"\n\n    if (entry.type === \"notification\") {\n      result = entry.text + \"\\n\"\n    } else if (entry.type === \"message\") {\n      var from = \"\"\n      if (entry.from === \"user\") {\n        from = this.state.PlayerName\n      } else if (entry.from === \"char\") {\n        from = this.state.CharName\n      } else {\n        console.error(\"Couldn't resolve line source\")\n      }\n      result = from + \": \\\"\" + entry.text + \"\\\".\\n\"\n    } else {\n      console.error(\"Wrong entry type\")\n    }\n\n    return result\n  }\n\n  parseReply(reply) {\n    this.setState((prevState) => {\n      const new_history = prevState.ChatHistory.concat([{\n        text: reply,\n        type: \"message\"\n      }])\n\n      return { ChatHistory: new_history }\n    })\n  }\n\n  async triggerEventHandler(event) {\n    event.preventDefault()\n    // This is very very very very bad\n    if (this.api_lock) {\n      return\n    }\n    this.api_lock = true\n\n    const reply = await this.triggerEvent(this.state.EventDescInput, this.state.EventReaction)\n    this.parseReply(reply)\n\n    this.api_lock = false\n  }\n\n  async triggerEvent(desc, attitude) {\n    console.log(\"Triggering event\")\n\n    let character_reply = await APIClient.TriggerEvent(this.state.id, desc, attitude)\n\n    this.setState((state, props) => ({\n      ChatChrono: character_reply,\n      ChatInput: \"\"\n    }));\n\n    this.api_lock = false\n  }\n\n  async GetReplyFromCharacter(id, text, name) {\n    try {\n      let reply = await APIClient.GetReplyFromCharacter(this.state.id, text, this.state.PlayerName)\n      return reply\n    } catch (e) {\n      console.error(e)\n    }\n\n    return null\n  }\n\n  async sendHandler(event) {\n    event.preventDefault()\n\n    // This is very very very very bad\n    if (this.api_lock) {\n      return\n    }\n    this.api_lock = true\n\n    console.log(\"Sent\")\n\n    let text = this.state.ChatInput\n    let reply = await this.GetReplyFromCharacter(this.state.id, text, this.state.PlayerName)\n\n    if (!reply) {\n      return\n    }\n\n    this.parseReply(reply)\n    this.clearChatInput()\n\n    this.api_lock = false\n  }\n\n  chatHistory() {\n    return this.state.CharDesc + \"\\n\" + this.state.PlayerDesc + \"\\n\" + this.state.CharName + \": \" + this.state.CharStartLine + \".\\n\" + this.state.ChatHistory.map(elem => { return this.renderChatEntry(elem) }).join(\"\\n\")\n  }\n\n  renderChatHistory() {\n    if (this.state.CharDesc) {\n      return this.displayWithNewlines(this.chatHistory())\n    }\n    return \"\"\n  }\n\n  render() {\n    return (\n      <table id=\"demo-window\"><tbody>\n        {/* Character selections */}\n        <tr>\n          <td colSpan=\"3\">\n            Select NPC character\n            <div>\n              <button id=\"TrevorButton\" onClick={this.changeCharacterHandler}>Trevor</button>\n              <button id=\"LandaButton\" onClick={this.changeCharacterHandler}>Hans Landa</button>\n              <button id=\"CourtneyButton\" onClick={this.changeCharacterHandler}>Courtney Williams</button>\n              <button id=\"CustomButton\" onClick={this.changeCharacterHandler}>Custom...</button>\n            </div>\n          </td>\n        </tr>\n\n        {/* Events & mood */}\n        <tr>\n          <td>\n            <div className=\"menu-widget\">\n              Chat\n              <table className=\"chat-window\"><tbody>\n                {/* Chat window */}\n                <tr>\n                  <td colSpan=\"3\"><div className=\"dialogue-window\">\n                    {this.renderChatHistory()}\n                  </div></td>\n                </tr>\n                <tr>\n                  <td colSpan=\"2\"><input id=\"ChatInput\" onChange={this.textInputHandler} placeholder=\"Type here\"></input></td>\n                  <td><button onClick={this.sendHandler}>Reply</button></td>\n                </tr>\n              </tbody></table>\n            </div>\n          </td>\n          <td>\n            Moods\n            <table><tbody>\n              <tr><td><button id=\"NeutralMoodButton\" onClick={this.changeMoodHandler}>Neutral</button></td></tr>\n              <tr><td><button id=\"JoyMoodButton\" onClick={this.changeMoodHandler}>Joy</button></td></tr>\n              <tr><td><button id=\"EnvyMoodButton\" onClick={this.changeMoodHandler}>Envy</button></td></tr>\n              <tr><td><button id=\"FearMoodButton\" onClick={this.changeMoodHandler}>Fear</button></td></tr>\n            </tbody></table>\n          </td>\n          <td>\n            <div><table><tbody>\n              <tr>\n                <td colSpan=\"3\">Trigger game event</td>\n              </tr>\n              <tr>\n                <td colSpan=\"2\" rowSpan=\"2\"><textarea id=\"EventDescInput\" onChange={this.textInputHandler} value={this.state.EventDescInput}></textarea></td>\n                <td><select onChange={this.changeEventReaction} value={this.state.EventReaction}>\n                  <option value=\"none\">It made them:</option>\n                  <option value=\"angry\">Angry</option>\n                  <option value=\"pleased\">Pleased</option>\n                  <option value=\"scared\">Scared</option>\n                  <option value=\"neutral\">Neutral</option>\n                </select></td>\n              </tr>\n              <tr>\n                <td><button onClick={this.triggerCustomEvent}>Go</button></td>\n              </tr>\n              <tr>\n                <td colSpan=\"3\">Preset events</td>\n              </tr>\n              <tr>\n                <td><button id=\"FlowersEvent\" onClick={this.presetEventHandler}>Receives flowers</button></td>\n                <td><button id=\"DisrespectEvent\" onClick={this.presetEventHandler}>Show disrespect</button></td>\n                <td><button id=\"CarCrashEvent\" onClick={this.presetEventHandler}>The car crashes nearby</button></td>\n              </tr>\n            </tbody></table></div>\n          </td>\n        </tr>\n\n        {/* Describe character | description */}\n        <tr>\n          <td colSpan=\"3\">\n            Describe character\n            <table><tbody>\n              <tr>\n                <td>\n                  <div>Name</div>\n                  <input id=\"CharName\" onChange={this.textInputHandler} value={this.state['CharName']} placeholder=\"Name...\"></input>\n                </td>\n                <td rowSpan=\"2\">\n                  <div>Description</div>\n                  <textarea id=\"CharDesc\" onChange={this.textInputHandler} value={this.state.CharDesc}></textarea>\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  <div>Starting line</div>\n                  <textarea id=\"CharStartLine\" onChange={this.textInputHandler} value={this.state.CharStartLine} placeholder=\"Type starting line here...\"></textarea>\n                </td>\n              </tr>\n            </tbody></table>\n          </td>\n        </tr>\n\n        {/* Player */}\n        <tr>\n          <td colSpan=\"3\">\n            Player's description\n\n            Name\n            <div className=\"menu-input\">\n              <div><input id=\"PlayerName\" onChange={this.textInputHandler} value={this.state.PlayerName} placeholder=\"Your name...\"></input></div>\n            </div>\n\n            Description (optional)\n            <div className=\"menu-input\">\n              <div><textarea id=\"PlayerDesc\" onChange={this.textInputHandler} value={this.state.PlayerDesc}></textarea></div>\n            </div>\n          </td>\n        </tr>\n      </tbody></table>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('body-container')\n);\n\n\n"],"sourceRoot":""}